<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            const input = [1, 2, 4, 591, 392, 391, 2, 5, 10, 2, 1, 1, 1, 20, 20]

            // regular answer
            const answer = (arr) => {
                const tracker = {}

                for (const el of arr) {
                    if (!(el in tracker)) {
                        tracker[el] = el
                        continue
                    }

                    if (!Array.isArray(tracker[el])) {
                        tracker[el] = [el]
                    }
                    tracker[el].push(el)
                }

                return Object.values(tracker)
            }

            console.log(answer(input))

            // bonus answer
            const input2 = [1, '2', '3', 2]

            const answer2 = (arr) => {
                const tracker = {}

                for (const el of arr) {
                    const type = typeof el

                    if (!(type in tracker)) {
                        tracker[type] = el
                        continue
                    }

                    if (!Array.isArray(tracker[type])) {
                        const x = tracker[type]
                        tracker[type] = [x]
                    }

                    tracker[type].push(el)
                }

                return Object.values(tracker)
            }

            console.log(answer2(input2))

            // extra
            // map allows you to sort by value and type, since map keys differentiate based on type as well
            const input3 = [1, 2, '1', 4, 591, 392, 391, 2, 5, 10, 2, '1', 1, 20, 20]

            const answer3 = (arr) => {
                const tracker = new Map()

                for (const el of arr) {
                    if (!tracker.has(el)) {
                        tracker.set(el, el)
                        continue
                    }

                    if (!Array.isArray(tracker.get(el))) {
                        tracker.set(el, [el])
                    }
                    tracker.get(el).push(el)
                }

                return [...tracker.values()]
            }

            console.log(answer(input3))
            console.log(answer3(input3))
        </script>
    </body>
</html>
